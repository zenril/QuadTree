{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/tools/QuadTree.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Point","pos","data","_classCallCheck","this","x","y","point","distance","a","b","Math","sqrt","Circle","Rectangle","w","h","QuadTree","boundary","capacity","points","divisions","fn","length","contains","push","subdivide","peek","qTree","insert","refPoint","ret","intersectsWithPoint","findPoints","element","rectX","rectY","deltaX","max","min","deltaY","console","log","intersects","qtree","random","findInRadius"],"mappings":"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","file":"dist.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","class Point {\n    constructor(pos, data) {\n        this.x = pos.x;\n        this.y = pos.y;\n        this.r = pos.r || 0;\n        this.data = data;\n    }\n\n    intersects(point){\n        return (this.distance(point) <= point.r + this.r);\n    }\n\n    distance(point) {\n        var a = this.x - point.x;\n        var b = this.y - point.y;\n        return Math.sqrt( a*a + b*b );\n    }\n}\n\nclass Circle {\n    constructor(pos, data) {\n        this.x = pos.x;\n        this.y = pos.y;\n        this.r = pos.r || 0;\n        this.data = data;\n    }\n\n    intersects(point){\n        return (this.distance(point) <= point.r + this.r);\n    }\n\n    distance(point) {\n        var a = this.x - point.x;\n        var b = this.y - point.y;\n        return Math.sqrt( a*a + b*b );\n    }\n}\n\nclass Rectangle {\n    constructor(x,y,w,h) {\n        this.x = x;\n        this.y = y;\n        this.w = w;\n        this.h = h;\n    }\n\n    contains(point) {\n        return (\n            point.x >= this.x - this.w &&\n            point.x < this.x + this.w &&\n            point.y >= this.y - this.h &&\n            point.y < this.y + this.h\n        );\n    }\n}\n\nclass QuadTree {\n    constructor(boundary, capacity){\n        this.boundary = boundary;\n        this.capacity = capacity;\n        this.points = [];\n        this.divisions = null;\n    }\n\n    peek(fn) {\n        if(this.divisions) {\n            for (let x = 0; x < this.divisions.length; x++) {\n                for (let y = 0; y < this.divisions[x].length; y++) {\n                    fn(this.divisions[x][y]);\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n\n    insert(point) {\n        if(!this.boundary.contains(point)) return;\n        if(this.points.length < this.capacity){\n            this.points.push(point);\n        } else {\n            if(!this.divisions) {\n                this.subdivide();\n            }\n\n            this.peek(function(qTree){\n                qTree.insert(point);\n            });\n        }\n    }\n\n    findPoints(refPoint, fn, ret) {\n\n        if(!ret) ret = [];\n        if(!this.intersectsWithPoint(refPoint)){\n            return ret;\n        }\n\n        if(this.divisions) {\n            this.peek(function(qTree){\n                qTree.findPoints(refPoint, fn, ret);\n            });\n        }\n\n        if(this.points.length){\n            for (let p = 0; p < this.points.length; p++) {\n                const element = this.points[p];\n                if(fn(element)){\n                    ret.push(element);\n                }\n            }\n        }\n\n        return ret;\n    }\n\n    intersectsWithPoint(point){\n        var rectX = this.boundary.x - this.boundary.w/2;\n        var rectY = this.boundary.y - this.boundary.h/2;\n        var deltaX = point.x - Math.max(rectX, Math.min(point.x, rectX + this.boundary.w));\n        var deltaY = point.y - Math.max(rectY, Math.min(point.y, rectY + this.boundary.h));\n        return (deltaX * deltaX + deltaY * deltaY) < (point.r * point.r);\n    }\n\n    findInRadius(refPoint, r) {\n        console.log('a');\n        refPoint.r = r || refPoint.r;\n        return this.findPoints(refPoint, function(point){\n            return refPoint.intersects(point);\n        });\n    }\n\n    subdivide() {\n\n        this.divisions = [[null,null],[null,null]];\n\n        let x = this.boundary.x;\n        let y = this.boundary.y;\n        let w = this.boundary.w;\n        let h = this.boundary.h;\n\n        this.divisions[1][0] = (new QuadTree(\n            new Rectangle(x + w/2, y - h/2, w/2, h/2),\n            this.capacity\n        ));\n\n        this.divisions[0][0] = (new QuadTree(\n            new Rectangle(x - w/2, y - h/2, w/2, h/2),\n            this.capacity\n        ));\n\n        this.divisions[1][1] = (new QuadTree(\n            new Rectangle(x + w/2, y + h/2, w/2, h/2),\n            this.capacity\n        ));\n\n        this.divisions[0][1] = (new QuadTree(\n            new Rectangle(x - w/2, y + h/2, w/2, h/2),\n            this.capacity\n        )); \n    }\n}\n\nlet qtree = new QuadTree(new Rectangle(\n    250,250, //x,y center\n    500,500  //w,h\n), 4);\n\nfor (let i = 0; i < 50; i++) {\n    let p = new Point({\n        x: Math.random() * 500, \n        y: Math.random() * 500}, \n        {}\n    );\n    qtree.insert(p);\n}\n\nqtree.findInRadius(new Circle({\n    x:250,y:250,\n    r:200\n}));\n\nexport {Point, QuadTree, Rectangle, Circle};","export {Point as QPoint, Rectangle as QRectangle, QuadTree} from './tools/QuadTree';"],"sourceRoot":""}